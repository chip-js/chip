var Path={version:"0.8.4",map:function(a){return Path.routes.defined.hasOwnProperty(a)?Path.routes.defined[a]:new Path.core.route(a)},root:function(a){Path.routes.root=a},rescue:function(a){Path.routes.rescue=a},history:{initial:{},pushState:function(a,b,c){Path.history.supported?(history.pushState(a,b,c),Path.dispatch(c)):Path.history.fallback&&(window.location.hash="#"+c)},popState:function(){var a=!Path.history.initial.popped&&location.href==Path.history.initial.URL;Path.history.initial.popped=!0,a||Path.dispatch(document.location.pathname)},listen:function(a){if(Path.history.supported=!(!window.history||!window.history.pushState),Path.history.fallback=a,Path.history.supported)Path.history.initial.popped="state"in window.history,Path.history.initial.URL=location.href,window.onpopstate=Path.history.popState;else if(Path.history.fallback){for(route in Path.routes.defined)"#"!=route.charAt(0)&&(Path.routes.defined["#"+route]=Path.routes.defined[route],Path.routes.defined["#"+route].path="#"+route);Path.listen()}}},match:function(a,b){var c,d,e,f,g,h={},i=null;for(i in Path.routes.defined)if(null!==i&&void 0!==i)for(i=Path.routes.defined[i],c=i.partition(),f=0;f<c.length;f++){if(d=c[f],g=a,d.search(/:/)>0)for(e=0;e<d.split("/").length;e++)e<g.split("/").length&&":"===d.split("/")[e].charAt(0)&&(h[d.split("/")[e].replace(/:/,"")]=g.split("/")[e],g=g.replace(g.split("/")[e],d.split("/")[e]));if(d===g)return b&&(i.params=h),i}return null},dispatch:function(a){var b,c;if(Path.routes.current!==a){if(Path.routes.previous=Path.routes.current,Path.routes.current=a,c=Path.match(a,!0),Path.routes.previous&&(b=Path.match(Path.routes.previous),null!==b&&null!==b.do_exit&&b.do_exit()),null!==c)return c.run(),Path.onchange&&Path.onchange(b,c),!0;null!==Path.routes.rescue&&Path.routes.rescue(),Path.onchange&&Path.onchange(b,c)}},listen:function(){var a=function(){Path.dispatch(location.hash)};""===location.hash&&null!==Path.routes.root&&(location.hash=Path.routes.root),"onhashchange"in window&&(!document.documentMode||document.documentMode>=8)?window.onhashchange=a:setInterval(a,50),""!==location.hash&&Path.dispatch(location.hash)},core:{route:function(a){this.path=a,this.action=null,this.do_enter=[],this.do_exit=null,this.params={},Path.routes.defined[a]=this}},routes:{current:null,root:null,rescue:null,previous:null,defined:{}}};Path.core.route.prototype={to:function(a){return this.action=a,this},enter:function(a){return a instanceof Array?this.do_enter=this.do_enter.concat(a):this.do_enter.push(a),this},exit:function(a){return this.do_exit=a,this},partition:function(){for(var a,b,c=[],d=[],e=/\(([^}]+?)\)/g;a=e.exec(this.path);)c.push(a[1]);for(d.push(this.path.split("(")[0]),b=0;b<c.length;b++)d.push(d[d.length-1]+c[b]);return d},run:function(){var a,b,c=!1;if(Path.routes.defined[this.path].hasOwnProperty("do_enter")&&Path.routes.defined[this.path].do_enter.length>0)for(a=0;a<Path.routes.defined[this.path].do_enter.length;a++)if(b=Path.routes.defined[this.path].do_enter[a].apply(this,null),b===!1){c=!0;break}c||Path.routes.defined[this.path].action()}},function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=[].slice,A={}.hasOwnProperty;o=function(a){var b;return b=$({}),a.on=b.on.bind(b),a.one=b.one.bind(b),a.off=b.off.bind(b),a.trigger=b.trigger.bind(b)},i={init:function(){return this.rootApp||(this.rootApp=i.app()),this.rootApp.init()},app:function(b){var c;return c=new a(b),b||(this.rootApp=c),c}},$(function(){return i.init()}),window.chip=i,f=function(){function a(){this.routes=[],this.params={},this.prefix="",o(this)}return a.prototype.param=function(a,b){if("function"!=typeof b)throw new Error('param must have a callback of type "function". Got '+b+".");return(this.params[a]||(this.params[a]=[])).push(b),this},a.prototype.route=function(a,b){if("function"!=typeof b)throw new Error('route must have a callback of type "function". Got '+b+".");return"/"!==a[0]&&(a="/"+a),this.routes.push(new e(a,b)),this},a.prototype.redirect=function(a){return a=this.prefix+a,this.currentUrl!==a?this.hashOnly||0===a.indexOf(this.root)?(this.usePushState?(history.pushState({},"",a),this.dispatch(a)):(this.hashOnly||(a=a.replace(this.root,""),"/"!==a[0]&&(a="/"+a)),location.hash="/"===a?"":"#"+a),this):(location.href=a,void 0):void 0},a.prototype.listen=function(a){var b,c,d,e,f=this;if(null==a&&(a={}),null!=a.root&&(this.root=a.root),null!=a.prefix&&(this.prefix=a.prefix),null!=a.hashOnly&&(this.hashOnly=a.hashOnly),this.usePushState=!this.hashOnly&&null!=(null!=(e=window.history)?e.pushState:void 0),null!=this.root||this.usePushState||(this.hashOnly=!0),this.hashOnly&&(this.prefix=""),b=null,c=function(){var a;return a=b(),f.currentUrl!==a?(f.currentUrl=a,f.dispatch(a)):void 0},this.usePushState)location.hash&&(d=location.pathname.replace(/\/$/,"")+location.hash.replace(/^#?\/?/,"/"),history.replaceState({},"",d)),b=function(){return location.pathname+location.search},$(window).on("popstate",c);else{if(!this.hashOnly&&location.pathname!==this.root)return location.href=this.root+"#"+location.pathname,void 0;b=function(){return(f.hashOnly?"":location.pathname.replace(/\/$/,""))+location.hash.replace(/^#?\/?/,"/")},$(window).on("hashchange",c)}return c(),this},a.prototype.dispatch=function(a){var b,c,d,e,f,g,h,i=this;return f=document.createElement("a"),f.href=a,g={query:s(f.search)},e=f.pathname,0===e.indexOf(this.prefix)?(e=e.replace(this.prefix,""),this.trigger("change",e),h=this.routes.filter(function(a){return a.match(e)}),b=[],c={},h.forEach(function(a){var d,e,f;b.push(function(b){return g.params=a.params,b()}),f=a.params;for(d in f)e=f[d],c[d]!==e&&this.params[d]&&(c[d]=e,this.params[d].forEach(function(a){return b.push(a.bind(null,g,e))}));return b.push(a.callback.bind(null,g))}),d=function(a){var c;if(a)return i.trigger("error",a);if(0!==b.length)return c=b.shift(),c(d)},0===b.length?d("notFound"):d(),this):void 0},a}(),i.Router=f,e=function(){function a(a,b){this.path=a,this.callback=b,this.keys=[],this.expr=r(a,this.keys)}return a.prototype.match=function(a){var b,c,d,e,f,g;if(!(d=this.expr.exec(a)))return!1;for(this.params={},b=f=0,g=d.length;g>f;b=++f)e=d[b],0!==b&&(c=this.keys[b-1],"string"==typeof e&&(e=decodeURIComponent(e)),c||(c="*"),this.params[c]=e);return!0},a}(),i.Route=e,r=function(a,b){return a instanceof RegExp?a:(Array.isArray(a)&&(a="("+a.join("|")+")"),a=a.concat("/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?(\*)?/g,function(a,c,d,e,f,g,h){var i;return b.push(e),c=c||"",i="",g||(i+=c),i+="(?:",g&&(i+=c),i+=d||"",i+=f||(d&&"([^/.]+?)"||"([^/]+?)")+")",i+=g||"",h?i+="(/*)?":void 0}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)"),new RegExp("^"+a+"$","i"))},s=function(a){var b;return b={},""===a?b:(a.replace(/^\?/,"").split("&").forEach(function(a){var c,d,e;return e=a.split("="),c=e[0],d=e[1],b[decodeURIComponent(c)]=decodeURIComponent(d)}),b)},d=function(){function a(a,b,c){this.getter=a,this.callback=b,this.oldValue=c}return a.prototype.skipNextSync=function(){return this.skip=!0},a.prototype.sync=function(){var b,c,d;if(d=this.getter(),this.skip)delete this.skip;else if(Array.isArray(d)&&Array.isArray(this.oldValue))c=k.array(d,this.oldValue),c.length&&this.callback(d,this.oldValue,c);else if(d&&this.oldValue&&"object"==typeof d&&"object"==typeof this.oldValue)b=k.object(d,this.oldValue),b.length&&this.callback(d,this.oldValue,b);else{if(d===this.oldValue)return;this.callback(d,this.oldValue)}return this.oldValue=a.immutable(d)},a.prototype.close=function(){return a.remove(this)},a.observers=[],a.add=function(b,c,d){var e,f;return"function"==typeof c&&(d=c,c=!1),f=b(),e=new a(b,d,this.immutable(f)),this.observers.push(e),c||d(f),e},a.remove=function(a){var b;return b=this.observers.indexOf(a),-1!==b?(this.observers.splice(b,1),!0):!1},a.syncing=!1,a.rerun=!1,a.cycles=0,a.max=10,a.timeout=null,a.sync=function(a){var b=this;if(this.syncing)return this.rerun=!0,!1;if(a)return this.timeout?!1:(this.timeout=setTimeout(function(){return b.timeout=null,b.sync()},0),!0);for(this.syncing=!0,this.rerun=!0,this.cycles=0;this.rerun;){if(++this.cycles===this.max)throw"Infinite observer syncing, an observer is calling Observer.sync() too many times";this.rerun=!1;for(var c=0;c<this.observers.length;c++)this.observers[c].sync()}return this.syncing=!1,this.cycles=0,!0},a.immutable=function(a){return Array.isArray(a)?a.slice():a&&"object"==typeof a?this.copyObject(a):a},a.copyObject=function(a){var b,c,d;b={};for(c in a)d=a[c],b[c]=d;return b},a}(),i.Observer=d,c=function(){function a(){this._observers=[]}return a.prototype.params={},a.prototype.watch=function(b,c,e){var f,g;return f=a.createBoundFunction(this,b),g=d.add(f,c,e),g.expr=b,this._observers.push(g),g},a.prototype.eval=function(b){return a.createFunction(b).call(this)},a.prototype.getBoundEval=function(){var b,c;return b=arguments[0],c=2<=arguments.length?z.call(arguments,1):[],a.createBoundFunction(this,b,c)},a.prototype.exprHasFilter=function(a){return l(a)},a.prototype.redirect=function(a){return i.redirect(a)},a.prototype.cloneValue=function(a){return d.immutable(this[a])},a.prototype.closeController=function(){var a,b,c,d;if(this._observers){for(d=this._observers,b=0,c=d.length;c>b;b++)a=d[b],a.close();this._observers.length=0}},a.prototype.syncView=function(a){return d.sync(a),"function"==typeof a?setTimeout(a):void 0},a.prototype.syncNow=function(){var a,b,c,d,e;for(d=this._observers,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.sync());return e},a.prototype.runFilter=function(){var b,c,d,e;return e=arguments[0],d=arguments[1],b=3<=arguments.length?z.call(arguments,2):[],c=a.filters[d],c?c.apply(null,[this,e].concat(z.call(b))):(console.error("Filter `"+d+"` has not been defined."),e)},a.keywords=["this","window","$","true","false"],a.filters={},a.exprCache={},a.createFunction=function(a,b){var c,d,e,f;if(null==b&&(b=[]),f=q(a,b),d=this.exprCache[f])return d;try{e=-1===f.indexOf("(")?"try{return "+f+"}catch(e){}":"try{return "+f+"}catch(e){throw new Error("+("'Error processing binding expression `"+a.replace(/'/g,"\\'")+"` ' + e)}"),d=this.exprCache[f]=Function.apply(null,z.call(b).concat([e]))}catch(g){throw c=g,new Error(c.message+" in observer binding:\n`"+a+"`\n"+"Compiled binding:\n"+e)}return d},a.createBoundFunction=function(b,c,d){var e;return e=a.createFunction(c,d),e.bind(b)},a}(),$.fn.controller=function(a){var b,c;for(c=this;c.length;){if(b=c.data("controller"))return a&&b.passthrough?b.passthrough:b;c=c.parent()}return null},$.event.special.elementRemove={remove:function(a){return a.handler()}},w=/[a-z$_\$][a-z_\$0-9\.-]*\s*:?|'|"/gi,v=/(['"])(\\\1|[^\1])*?\1/g,j=/(['"])\1/g,u=/((\{|,)?\s*)([a-z$_\$][a-z_\$0-9\.-]*)(\s*(:)?)/gi,t=/\|(\|)?/g,g=/\s*:\s*/g,q=function(a,b){var d,e,f,h,i;return e=c.keywords.concat(b),h=[],a=a.replace(v,function(a,b){return h.push(a),b+b}),a=a.replace(t,function(a,b){return b?a:"@@@"}),d=a.split(/\s*@@@\s*/),a=d.shift(),d.length&&(f=(null!=(i=a.match(v))?i.length:void 0)||0,d.forEach(function(b){var c,d;return c=b.split(g),h.splice(f++,0,"'"+c[0]+"'"),f+=(null!=(d=b.match(v))?d.length:void 0)||0,c[0]="''",a="runFilter("+a+","+c.join(",")+")"})),a=a.replace(u,function(a,b,c,d,f,g,h,i){return c&&g||"."===i[h+b.length-1]?a:-1!==e.indexOf(d.split(/\.|\(/).shift())?a:b+"this."+d+f}),a=a.replace(j,function(){return h.shift()})},l=function(a){return a=a.replace(t,function(a,b){return b?a:"@@@"}),-1!==a.indexOf("@@@")},i.Controller=c,a=function(){function a(a){this.name=a,this.controllers={},this.templates={},this.router=new f,this.rootElement=$("html")}return a.prototype.init=function(a){var b,c,d,e;if(!this.inited){for(this.inited=!0,a&&(this.rootElement=a),this.rootController=this.createController({element:this.rootElement,name:"application"}),b=this,this.rootElement.find('script[type="text/html"]').each(function(){var a,c;return a=$(this),c=a.attr("name")||a.attr("id"),c?(b.template(c,a.html()),a.remove()):void 0}),e=[];(c=this.rootElement.find("[data-controller]:first")).length;)d=c.attr("data-controller"),c.removeAttr("data-controller"),e.push(this.createController({element:c,name:d,parent:this.rootController}));return e}},a.prototype.template=function(a,b){if(arguments.length>1)return this.templates[a]=b,this;if(!this.templates.hasOwnProperty(a))throw'Template "'+a+'" does not exist';return $(this.templates[a].trim())},a.prototype.controller=function(a,b){return arguments.length>1?(this.controllers[a]=b,this):this.controllers[a]||window[a+"Controller"]},a.prototype.createController=function(a){var b,d,e,f,g,h,i=this;if(null==a&&(a={}),a.parent instanceof c?(b=function(){return c.call(this)},a.parent&&(b.prototype=a.parent),d=new b,d.parent=a.parent,a.passthrough&&(d.passthrough=a.parent.hasOwnProperty("passthrough")?a.parent.passthrough:a.parent)):d=new c,a.properties){h=a.properties;for(e in h)A.call(h,e)&&(f=h[e],d[e]=f)}return d.child=function(a){return null==a&&(a={}),a.parent=d,i.createController(a)},d.template=function(a){return i.template(a)},a.element&&(a.element.on("elementRemove",function(){return d.closeController()}),d.element=a.element,a.element.data("controller",d)),a.name&&"function"==typeof(g=this.controller(a.name))&&g(d),a.element&&a.element.bindTo(d),d},a.prototype.route=function(a,b){var d,e=this;return b||(b=a.replace(/^\//,"")),"string"==typeof b&&(d=b,b=function(a){var b,f,g,h;for(g in a)A.call(a,g)&&(h=a[g],c.prototype[g]=h);return b=e.rootElement.find("[data-route]:first"),b.html(e.template(d)),f=e.createController({element:b,parent:e.rootController,name:d}),f.syncView()}),this.router.route(a,b),this},a.prototype.redirect=function(a){return this.router.redirect(a)},a.prototype.mount=function(){},a.prototype.listen=function(a){var b;return b=this.router,$(function(){return b.listen(a)}),this.rootElement.on("click","a[href]",function(a){return a.isDefaultPrevented()||this.host!==location.host||this.href===location.href+"#"?void 0:(a.preventDefault(),a.stopPropagation(),b.redirect($(this).attr("href")))})},a}(),i.App=a,b=function(){function a(a,b){this.name=a,this.expr=b}return a.prefix="data-",a.handlers=[],a.addHandler=function(a,b,c){var d;return"function"==typeof b&&(c=b,b=0),d={name:a,priority:b,handler:c},this.handlers[a]=d,this.handlers.push(d),this.handlers.sort(function(a,b){return b.priority-a.priority})},a.addEventHandler=function(a){return this.addHandler(a,function(b,c,d){return b.on(a,function(a){return a.preventDefault(),d.eval(c)})})},a.addKeyEventHandler=function(a,b,c){return this.addHandler(a,function(a,d,e){return a.on("keydown",function(a){return null!=c&&a.ctrlKey!==c&&a.metaKey!==c||a.keyCode!==b?void 0:(a.preventDefault(),e.eval(d))})})},a.addAttributeHandler=function(a){return this.addHandler(a,function(b,c,d){return d.watch(c,function(c){return null!=c?b.attr(a,c):b.removeAttr(a)})})},a.addAttributeToggleHandler=function(a){return this.addHandler(a,function(b,c,d){return d.watch(c,function(c){return b.prop(a,c||!1)})})},a.process=function(a,b){var d,e,f,g,h,i,j,k,l,m,n=this;if(!(b instanceof c))throw new Error("A Controller is required to bind a jQuery element.");for(i=a.get(0),j=i.parentNode,e=Array.prototype.slice.call(i.attributes),e=e.filter(function(a){return 0===a.name.indexOf(n.prefix)&&n.handlers[a.name.replace(n.prefix,"")]}),e=e.map(function(a){var b;return b=n.handlers[a.name.replace(n.prefix,"")],{name:a.name,value:a.value,priority:b.priority,handler:b.handler}}),e=e.sort(function(a,b){return b.priority-a.priority});e.length;)if(d=e.shift(),i.hasAttribute(d.name)){if(i.removeAttribute(d.name),h=d.handler(a,d.value,b),i.parentNode!==j)return;h instanceof c&&(b=h)}for(g=Array.prototype.slice.call(i.children),m=[],k=0,l=g.length;l>k;k++)f=g[k],m.push(this.process($(f),b));return m},a}(),jQuery.fn.bindTo=function(a){return b.process(this,a)},i.Binding=b,b.addHandler("debug",function(a,b,c){return c.watch(b,function(a){return console.info("Debug:",b,"=",a)})}),b.addHandler("text",function(a,b,c){return c.watch(b,function(b){return a.text(null!=b?b:"")})}),b.addHandler("html",function(a,b,c){return c.watch(b,function(b){return a.html(null!=b?b:"")})}),b.addHandler("class",function(a,b,c){return c.watch(b,function(b){var c,d,e;if(Array.isArray(b)&&(b=b.join(" ")),"string"==typeof b)return a.attr("class",b);if(b&&"object"==typeof b){e=[];for(c in b)A.call(b,c)&&(d=b[c],d?e.push(a.addClass(c)):e.push(a.removeClass(c)));return e}})}),b.addHandler("active",function(a,b,c){var d,e;return b?c.watch(b,function(b){return b?a.addClass("active"):a.removeClass("active")}):(e=function(){return d.length&&d.get(0).href===location.href?a.addClass("active"):a.removeClass("active")},d=a.filter("a[href],a[data-href]").add(a.find("a[href],a[data-href]")).first(),d.attr("data-href")&&d.on("hrefChanged",e),$(document).on("urlChange",e),a.on("elementRemove",function(){return $(document).off("urlChange",e)}),e())}),Path.onchange=function(){return $(document).trigger("urlChange")},b.addHandler("value",function(a,b,c){var d,e,f,g,h;return d="checkbox"===a.attr("type")?function(){return a.prop("checked")}:function(){return a.val()},f="checkbox"===a.attr("type")?function(b){return a.prop("checked",b)}:function(b){return a.val(b)},e=c.watch(b,function(a){return d()!==a?f(a):void 0}),c.exprHasFilter(b)?void 0:(h=c.passthrough||c,g=h.getBoundEval(b+" = value","value"),a.filter("select").length?setTimeout(function(){return f(c.eval(b)),g(d())}):g(d()),a.on("keydown keyup change",function(){return d()!==e.oldValue?(g(d()),e.skipNextSync(),c.syncView()):void 0}))}),["click","dblclick","submit","change","focus","blur"].forEach(function(a){return b.addEventHandler(a)}),n={enter:13,esc:27};for(p in n)A.call(n,p)&&(m=n[p],b.addKeyEventHandler(p,m));for(b.addKeyEventHandler("ctrl-enter",n.enter,!0),h=["href","src","id"],x=0,y=h.length;y>x;x++)p=h[x],b.addAttributeHandler(p);["checked","disabled"].forEach(function(a){return b.addAttributeToggleHandler(a)}),b.addHandler("if",50,function(a,b,c){var d,e,f;return f=a,e=$('<script type="text/if-placeholder"><!--'+b+"--></script>").replaceAll(f),d=a.attr("data-controller"),a.removeAttr("data-controller"),c.watch(b,function(b){if(b){if(e.parent().length)return a=f.clone(),c.child({element:a,name:d,passthrough:!0}),e.replaceWith(a)}else if(!e.parent().length)return a.replaceWith(e)})}),b.addHandler("repeat",100,function(a,b,c){var d,e,f,g,h,i,j,l,m,n,o,p;if(h=b,o=b.split(/\s+in\s+/),g=o[0],b=o[1],!g||!b)throw'Invalid data-repeat "';return d=a.attr("data-controller"),a.removeAttr("data-controller"),p=g.split(/\s*,\s*/),g=p[0],j=p[1],m=a,i=$('<script type="text/repeat-placeholder"><!--'+b+"--></script>").replaceAll(m),f=$(),l={},n=null,e=function(a){var b;return b=m.clone(),Array.isArray(n)?l[g]=a:(j&&(l[j]=a),l[g]=n[a]),c.child({element:b,name:d,properties:l}),b.get(0)},c.watch(b,function(a,b,c){if(n=a,c){if(Array.isArray(n)||n&&"object"==typeof n)return Array.isArray(n)||(c=k.array(Object.keys(n,b))),c.forEach(function(a){var b,c,d,g,h;for(c=[a.index,a.removed.length],g=[],b=a.index;b<a.index+a.addedCount;)d=n[b],g.push(e(d)),b++;return h=$(f.splice.apply(f,c.concat(g))),h.length&&(0===f.length-g.length&&h.eq(0).replaceWith(i),h.remove()),g.length?0===a.index?i.parent().length?i.after(g).remove():f.eq(g.length).before(g):f.eq(a.index-1).after(g):void 0})}else if(f.length&&(f.eq(0).replaceWith(i),f.remove(),f=$()),a&&!Array.isArray(a)&&"object"==typeof a&&(a=Object.keys(a)),Array.isArray(n)&&n.length)return n.forEach(function(a){return f.push(e(a))}),i.after(f).remove()})}),b.addHandler("partial",50,function(a,b,c){var d,e,f,g,h,i;return h=b.split(/\s+as\s+\s+with\s+/),g=h.pop(),e=h[0],f=h[1],d=null,i={},e&&f&&c.watch(e,!0,function(a){return d[f]=a}),c.watch(g,function(b){return null!=b?(a.html(c.template(b)),e&&f&&(i[f]=c.eval(e)),d=c.child({element:a,name:b,properties:i})):void 0})}),b.addHandler("controller",30,function(a,b,c){return c.child({element:a,name:b})}),c.filters.filter=function(a,b,c){return Array.isArray(b)?c?b.filter(c):b:[]},c.filters.date=function(a,b){return b?(b instanceof Date||(b=new Date(b)),isNaN(b.getTime())?"":b.toLocaleString()):""},c.filters.log=function(a,b,c){return null==c&&(c="Log"),console.log(c+":",b),b},c.filters.limit=function(a,b,c){return b&&"function"==typeof b.slice?0>c?b.slice(c):b.slice(0,c):b},c.filters.sort=function(a,b,c){return Array.isArray(b)?b.slice().sort(c):b},k={},function(){var a,b,c,d,e,f,g,h,i,j;return k.object=function(a,b){var c,d,e,g;c=[];for(g in b)e=b[g],d=a[g],(void 0===d||d!==e)&&(g in a?d!==e&&c.push(f(a,"updated",g,e)):c.push(f(a,"deleted",g,e)));for(g in a)d=a[g],g in b||c.push(f(a,"new",g));return Array.isArray(a)&&a.length!==b.length&&c.push(f(a,"updated","length",b.length)),c},f=function(a,b,c,d){return{object:a,type:b,name:c,oldValue:d}},c=0,d=1,a=2,b=3,k.array=function(f,k){var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;if(m=0,l=f.length,s=0,q=k.length,p=Math.min(l,q),v=h(f,k,p),y=i(f,k,p-v),m+=v,s+=v,l-=y,q-=y,0===l-m&&0===q-s)return[];if(m===l)return[g(m,k.slice(s,q),0)];if(s===q)return[g(m,[],l-m)];for(n=e(f,m,l,k,s,q),u=j(n),w=void 0,x=[],o=m,r=s,z=0,A=u.length;A>z;z++)t=u[z],t===c?(w&&(x.push(w),w=void 0),o++,r++):t===d?(w||(w=g(o,[],0)),w.addedCount++,o++,w.removed.push(k[r]),r++):t===a?(w||(w=g(o,[],0)),w.addedCount++,o++):t===b&&(w||(w=g(o,[],0)),w.removed.push(k[r]),r++);return w&&x.push(w),x},h=function(a,b,c){var d,e;for(d=e=0;c>=0?c>e:e>c;d=c>=0?++e:--e)if(a[d]!==b[d])return d;return c},i=function(a,b,c){var d,e,f;for(e=a.length,f=b.length,d=0;c>d&&a[--e]===b[--f];)d++;return d},g=function(a,b,c){return{index:a,removed:b,addedCount:c}},j=function(e){var f,g,h,i,j,k,l,m;for(h=e.length-1,i=e[0].length-1,f=e[h][i],g=[];h>0||i>0;)0!==h?0!==i?(l=e[h-1][i-1],m=e[h-1][i],k=e[h][i-1],j=k>m?l>m?m:l:l>k?k:l,j===l?(l===f?g.push(c):(g.push(d),f=l),h--,i--):j===m?(g.push(b),h--,f=m):(g.push(a),i--,f=k)):(g.push(b),h--):(g.push(a),i--);return g.reverse(),g},e=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q;for(l=f-e+1,g=c-b+1,h=new Array(l),i=n=0;l>=0?l>n:n>l;i=l>=0?++n:--n)h[i]=new Array(g),h[i][0]=i;for(j=o=0;g>=0?g>o:o>g;j=g>=0?++o:--o)h[0][j]=j;for(i=p=1;l>=1?l>p:p>l;i=l>=1?++p:--p)for(j=q=1;g>=1?g>q:q>g;j=g>=1?++q:--q)a[b+j-1]===d[e+i-1]?h[i][j]=h[i-1][j-1]:(k=h[i-1][j]+1,m=h[i][j-1]+1,h[i][j]=m>k?k:m);return h}}.call(this),i.equality=k}.call(this);