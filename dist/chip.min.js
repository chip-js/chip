/*! chip 2013-10-08 */
!function(a){"use strict";function b(){function a(a){"splice"===a[0].type&&"splice"===a[1].type&&(b=!0)}if("function"!=typeof Object.observe||"function"!=typeof Array.observe)return!1;var b=!1,c=[0];return Array.observe(c,a),c[1]=1,c.length=0,Object.deliverChangeRecords(a),b}function c(){if(a.document&&"securityPolicy"in a.document&&!a.document.securityPolicy.allowsEval)return!1;try{var b=new Function("","return true;");return b()}catch(c){return!1}}function d(a){return+a===a>>>0}function e(a){return+a}function f(a){return a===Object(a)}function g(a,b){return a===b?0!==a||1/a===1/b:H(a)&&H(b)?!0:a!==a&&b!==b}function h(a){return"string"!=typeof a?!1:(a=a.trim(),""==a?!0:"."==a[0]?!1:P.test(a))}function i(a,b){if(b!==Q)throw Error("Use Path.get to retrieve path objects");return""==a.trim()?this:d(a)?(this.push(a),this):(a.split(/\s*\.\s*/).filter(function(a){return a}).forEach(function(a){this.push(a)},this),G&&!F&&this.length&&(this.getValueFrom=this.compiledGetValueFromFn()),void 0)}function j(a){if(a instanceof i)return a;null==a&&(a=""),"string"!=typeof a&&(a=String(a));var b=R[a];if(b)return b;if(!h(a))return S;var b=new i(a,Q);return R[a]=b,b}function k(b){for(var c=0;T>c&&b.check();)b.report(),c++;a.testingExposeCycleCount&&(a.dirtyCheckCycleCount=c)}function l(a){for(var b in a)return!1;return!0}function m(a){return l(a.added)&&l(a.removed)&&l(a.changed)}function n(a,b){var c={},d={},e={};for(var f in b){var g=a[f];(void 0===g||g!==b[f])&&(f in a?g!==b[f]&&(e[f]=g):d[f]=void 0)}for(var f in a)f in b||(c[f]=a[f]);return Array.isArray(a)&&a.length!==b.length&&(e.length=a.length),{added:c,removed:d,changed:e}}function o(a,b){var c=b||(Array.isArray(a)?[]:{});for(var d in a)c[d]=a[d];return Array.isArray(a)&&(c.length=a.length),c}function p(a,b,c,d){if(this.closed=!1,this.object=a,this.callback=b,this.target=c,this.token=d,this.reporting=!0,F){var e=this;this.boundInternalCallback=function(a){e.internalCallback(a)}}q(this)}function q(a){V&&(U.push(a),p._allObserversCount++)}function r(a,b,c,d){p.call(this,a,b,c,d),this.connect(),this.sync(!0)}function s(a,b,c,d){if(!Array.isArray(a))throw Error("Provided object is not an Array");r.call(this,a,b,c,d)}function t(a){this.arr=[],this.callback=a,this.isObserved=!0}function u(a,b,c,d,e,g,h){var b=b instanceof i?b:j(b);return b&&b.length&&f(a)?(p.call(this,a,c,d,e),this.valueFn=g,this.setValueFn=h,this.path=b,this.connect(),this.sync(!0),void 0):(this.value_=b?b.getValueFrom(a):void 0,this.value=g?g(this.value_):this.value_,this.closed=!0,void 0)}function v(a,b,c,d){p.call(this,void 0,a,b,c),this.valueFn=d,this.observed=[],this.values=[],this.value=void 0,this.oldValue=void 0,this.oldValues=void 0,this.changeFlags=void 0,this.started=!1}function w(a,b){if("function"==typeof Object.observe){var c=Object.getNotifier(a);return function(d,e){var f={object:a,type:d,name:b};2===arguments.length&&(f.oldValue=e),c.notify(f)}}}function x(a,b,c){for(var d={},e={},f=0;f<b.length;f++){var g=b[f];$[g.type]?(g.name in c||(c[g.name]=g.oldValue),"updated"!=g.type&&("new"!=g.type?g.name in d?(delete d[g.name],delete c[g.name]):e[g.name]=!0:g.name in e?delete e[g.name]:d[g.name]=!0)):(console.error("Unknown changeRecord type: "+g.type),console.error(g))}for(var h in d)d[h]=a[h];for(var h in e)e[h]=void 0;var i={};for(var h in c)if(!(h in d||h in e)){var j=a[h];c[h]!==j&&(i[h]=j)}return{added:d,removed:e,changed:i}}function y(a,b,c){return{index:a,removed:b,addedCount:c}}function z(){}function A(a,b,c,d,e,f){return db.calcSplices(a,b,c,d,e,f)}function B(a,b,c,d){return c>b||a>d?-1:b==c||d==a?0:c>a?d>b?b-c:d-c:b>d?d-a:b-a}function C(a,b,c,d){for(var e=y(b,c,d),f=!1,g=0,h=0;h<a.length;h++){var i=a[h];if(i.index+=g,!f){var j=B(e.index,e.index+e.removed.length,i.index,i.index+i.addedCount);if(j>=0){a.splice(h,1),h--,g-=i.addedCount-i.removed.length,e.addedCount+=i.addedCount-j;var k=e.removed.length+i.removed.length-j;if(e.addedCount||k){var c=i.removed;if(e.index<i.index){var l=e.removed.slice(0,i.index-e.index);Array.prototype.push.apply(l,c),c=l}if(e.index+e.removed.length>i.index+i.addedCount){var m=e.removed.slice(i.index+i.addedCount-e.index);Array.prototype.push.apply(c,m)}e.removed=c,i.index<e.index&&(e.index=i.index)}else f=!0}else if(e.index<i.index){f=!0,a.splice(h,0,e),h++;var n=e.addedCount-e.removed.length;i.index+=n,g+=n}}}f||a.push(e)}function D(a,b){for(var c=[],f=0;f<b.length;f++){var g=b[f];switch(g.type){case"splice":C(c,g.index,g.removed.slice(),g.addedCount);break;case"new":case"updated":case"deleted":if(!d(g.name))continue;var h=e(g.name);if(0>h)continue;C(c,h,[g.oldValue],1);break;default:console.error("Unexpected record type: "+JSON.stringify(g))}}return c}function E(a,b){var c=[];return D(a,b).forEach(function(b){return 1==b.addedCount&&1==b.removed.length?(b.removed[0]!==a[b.index]&&c.push(b),void 0):(c=c.concat(A(a,b.index,b.index+b.addedCount,b.removed,0,b.removed.length)),void 0)}),c}var F=b(),G=c(),H=a.Number.isNaN||function(b){return"number"==typeof b&&a.isNaN(b)},I="__proto__"in{}?function(a){return a}:function(a){var b=a.__proto__;if(!b)return a;var c=Object.create(b);return Object.getOwnPropertyNames(a).forEach(function(b){Object.defineProperty(c,b,Object.getOwnPropertyDescriptor(a,b))}),c},J="[$_a-zA-Z]",K="[$_a-zA-Z0-9]",L=J+"+"+K+"*",M="(?:[0-9]|[1-9]+[0-9]+)",N="(?:"+L+"|"+M+")",O="(?:"+N+")(?:\\s*\\.\\s*"+N+")*",P=new RegExp("^"+O+"$"),Q={},R={};i.get=j,i.prototype=I({__proto__:[],valid:!0,toString:function(){return this.join(".")},getValueFrom:function(a,b){for(var c=0;c<this.length;c++){if(null==a)return;b&&b.observe(a),a=a[this[c]]}return a},compiledGetValueFromFn:function(){var a=this.map(function(a){return d(a)?'["'+a+'"]':"."+a}),b="",c="obj";b+="if (obj != null";for(var e=0;e<this.length-1;e++)this[e],c+=a[e],b+=" &&\n     "+c+" != null";return b+=")\n",c+=a[e],b+="  return "+c+";\nelse\n  return undefined;",new Function("obj",b)},setValueFrom:function(a,b){if(!this.length)return!1;for(var c=0;c<this.length-1;c++){if(!f(a))return!1;a=a[this[c]]}return f(a)?(a[this[c]]=b,!0):!1}});var S=new i("",Q);S.valid=!1,S.getValueFrom=S.setValueFrom=function(){};var T=1e3;p.prototype={internalCallback:function(a){this.closed||this.reporting&&this.check(a)&&(this.report(),this.testingResults&&(this.testingResults.anyChanged=!0))},close:function(){this.closed||(this.object&&"function"==typeof this.object.close&&this.object.close(),this.disconnect(),this.object=void 0,this.closed=!0)},deliver:function(a){this.closed||(F?(this.testingResults=a,Object.deliverChangeRecords(this.boundInternalCallback),this.testingResults=void 0):k(this))},report:function(){this.reporting&&(this.sync(!1),this.callback&&(this.reportArgs.push(this.token),this.invokeCallback(this.reportArgs)),this.reportArgs=void 0)},invokeCallback:function(a){try{this.callback.apply(this.target,a)}catch(b){p._errorThrownDuringCallback=!0,console.error("Exception caught during observer callback: "+(b.stack||b))}},reset:function(){this.closed||(F&&(this.reporting=!1,Object.deliverChangeRecords(this.boundInternalCallback),this.reporting=!0),this.sync(!0))}};var U,V=!F||a.forceCollectObservers;p._allObserversCount=0,V&&(U=[]);var W=!1,X="function"==typeof Object.deliverAllChangeRecords;a.Platform=a.Platform||{},a.Platform.performMicrotaskCheckpoint=function(){if(!W){if(X)return Object.deliverAllChangeRecords(),void 0;if(V){W=!0;var b=0,c={};do{b++;var d=U;U=[],c.anyChanged=!1;for(var e=0;e<d.length;e++){var f=d[e];f.closed||(F?f.deliver(c):f.check()&&(c.anyChanged=!0,f.report()),U.push(f))}}while(T>b&&c.anyChanged);a.testingExposeCycleCount&&(a.dirtyCheckCycleCount=b),p._allObserversCount=U.length,W=!1}}},V&&(a.Platform.clearObservers=function(){U=[]}),r.prototype=I({__proto__:p.prototype,connect:function(){F&&Object.observe(this.object,this.boundInternalCallback)},sync:function(){F||(this.oldObject=o(this.object))},check:function(a){var b,c;if(F){if(!a)return!1;c={},b=x(this.object,a,c)}else c=this.oldObject,b=n(this.object,this.oldObject);return m(b)?!1:(this.reportArgs=[b.added||{},b.removed||{},b.changed||{}],this.reportArgs.push(function(a){return c[a]}),!0)},disconnect:function(){F?this.object&&Object.unobserve(this.object,this.boundInternalCallback):this.oldObject=void 0}}),s.prototype=I({__proto__:r.prototype,connect:function(){F&&Array.observe(this.object,this.boundInternalCallback)},sync:function(){F||(this.oldObject=this.object.slice())},check:function(a){var b;if(F){if(!a)return!1;b=E(this.object,a)}else b=A(this.object,0,this.object.length,this.oldObject,0,this.oldObject.length);return b&&b.length?(this.reportArgs=[b],!0):!1}}),s.applySplices=function(a,b,c){c.forEach(function(c){for(var d=[c.index,c.removed.length],e=c.index;e<c.index+c.addedCount;)d.push(b[e]),e++;Array.prototype.splice.apply(a,d)})};var Y=Object.getPrototypeOf({}),Z=Object.getPrototypeOf([]);t.prototype={reset:function(){this.isObserved=!this.isObserved},observe:function(a){if(f(a)&&a!==Y&&a!==Z){var b=this.arr.indexOf(a);b>=0&&this.arr[b+1]===this.isObserved||(0>b&&(b=this.arr.length,this.arr[b]=a,Object.observe(a,this.callback)),this.arr[b+1]=this.isObserved,this.observe(Object.getPrototypeOf(a)))}},cleanup:function(){for(var a=0,b=0,c=this.isObserved;b<this.arr.length;){var d=this.arr[b];this.arr[b+1]==c?(b>a&&(this.arr[a]=d,this.arr[a+1]=c),a+=2):Object.unobserve(d,this.callback),b+=2}this.arr.length=a}},u.prototype=I({__proto__:p.prototype,connect:function(){F&&(this.observedSet=new t(this.boundInternalCallback))},disconnect:function(){this.value=void 0,this.value_=void 0,this.observedSet&&(this.observedSet.reset(),this.observedSet.cleanup(),this.observedSet=void 0)},check:function(){return this.observedSet&&this.observedSet.reset(),this.value_=this.path.getValueFrom(this.object,this.observedSet),this.observedSet&&this.observedSet.cleanup(),g(this.value_,this.oldValue_)?!1:(this.value=this.valueFn?this.valueFn(this.value_):this.value_,this.reportArgs=[this.value,this.oldValue],!0)},sync:function(a){a&&(this.observedSet&&this.observedSet.reset(),this.value_=this.path.getValueFrom(this.object,this.observedSet),this.value=this.valueFn?this.valueFn(this.value_):this.value_,this.observedSet&&this.observedSet.cleanup()),this.oldValue_=this.value_,this.oldValue=this.value},setValue:function(a){this.path&&("function"==typeof this.setValueFn&&(a=this.setValueFn(a)),this.path.setValueFrom(this.object,a))}}),v.prototype=I({__proto__:u.prototype,addPath:function(a,b){if(this.started)throw Error("Cannot add more paths once started.");var b=b instanceof i?b:j(b),c=b?b.getValueFrom(a):void 0;this.observed.push(a,b),this.values.push(c)},start:function(){this.connect(),this.sync(!0)},getValues:function(){this.observedSet&&this.observedSet.reset();for(var a=!1,b=0;b<this.observed.length;b+=2){var c=this.observed[b+1];if(c){var d=this.observed[b],e=c.getValueFrom(d,this.observedSet),f=this.values[b/2];if(!g(e,f)){if(!a&&!this.valueFn){this.oldValues=this.oldValues||[],this.changeFlags=this.changeFlags||[];for(var h=0;h<this.values.length;h++)this.oldValues[h]=this.values[h],this.changeFlags[h]=!1}this.valueFn||(this.changeFlags[b/2]=!0),this.values[b/2]=e,a=!0}}}return this.observedSet&&this.observedSet.cleanup(),a},check:function(){if(this.getValues()){if(this.valueFn){if(this.value=this.valueFn(this.values),g(this.value,this.oldValue))return!1;this.reportArgs=[this.value,this.oldValue]}else this.reportArgs=[this.values,this.oldValues,this.changeFlags];return!0}},sync:function(a){a&&(this.getValues(),this.valueFn&&(this.value=this.valueFn(this.values))),this.valueFn&&(this.oldValue=this.value)},close:function(){if(this.observed){for(var a=0;a<this.observed.length;a+=2){var b=this.observed[a];b&&"function"==typeof b.close&&b.close()}this.observed=void 0,this.values=void 0}p.prototype.close.call(this)}});var $={"new":!0,updated:!0,deleted:!0};u.defineProperty=function(a,b,c){var d=c.object,e=j(c.path),f=w(a,b),g=new u(d,c.path,function(a,b){f&&f("updated",b)});return Object.defineProperty(a,b,{get:function(){return e.getValueFrom(d)},set:function(a){e.setValueFrom(d,a)},configurable:!0}),{close:function(){var c=e.getValueFrom(d);f&&g.deliver(),g.close(),Object.defineProperty(a,b,{value:c,writable:!0,configurable:!0})}}};var _=0,ab=1,bb=2,cb=3;z.prototype={calcEditDistances:function(a,b,c,d,e,f){for(var g=f-e+1,h=c-b+1,i=new Array(g),j=0;g>j;j++)i[j]=new Array(h),i[j][0]=j;for(var k=0;h>k;k++)i[0][k]=k;for(var j=1;g>j;j++)for(var k=1;h>k;k++)if(this.equals(a[b+k-1],d[e+j-1]))i[j][k]=i[j-1][k-1];else{var l=i[j-1][k]+1,m=i[j][k-1]+1;i[j][k]=m>l?l:m}return i},spliceOperationsFromEditDistances:function(a){for(var b=a.length-1,c=a[0].length-1,d=a[b][c],e=[];b>0||c>0;)if(0!=b)if(0!=c){var f,g=a[b-1][c-1],h=a[b-1][c],i=a[b][c-1];f=i>h?g>h?h:g:g>i?i:g,f==g?(g==d?e.push(_):(e.push(ab),d=g),b--,c--):f==h?(e.push(cb),b--,d=h):(e.push(bb),c--,d=i)}else e.push(cb),b--;else e.push(bb),c--;return e.reverse(),e},calcSplices:function(a,b,c,d,e,f){var g=0,h=0,i=Math.min(c-b,f-e);if(0==b&&0==e&&(g=this.sharedPrefix(a,d,i)),c==a.length&&f==d.length&&(h=this.sharedSuffix(a,d,i-g)),b+=g,e+=g,c-=h,f-=h,0==c-b&&0==f-e)return[];if(b==c){for(var j=y(b,[],0);f>e;)j.removed.push(d[e++]);return[j]}if(e==f)return[y(b,[],c-b)];for(var k=this.spliceOperationsFromEditDistances(this.calcEditDistances(a,b,c,d,e,f)),j=void 0,l=[],m=b,n=e,o=0;o<k.length;o++)switch(k[o]){case _:j&&(l.push(j),j=void 0),m++,n++;break;case ab:j||(j=y(m,[],0)),j.addedCount++,m++,j.removed.push(d[n]),n++;break;case bb:j||(j=y(m,[],0)),j.addedCount++,m++;break;case cb:j||(j=y(m,[],0)),j.removed.push(d[n]),n++}return j&&l.push(j),l},sharedPrefix:function(a,b,c){for(var d=0;c>d;d++)if(!this.equals(a[d],b[d]))return d;return c},sharedSuffix:function(a,b,c){for(var d=a.length,e=b.length,f=0;c>f&&this.equals(a[--d],b[--e]);)f++;return f},calculateSplices:function(a,b){return this.calcSplices(a,0,a.length,b,0,b.length)},equals:function(a,b){return a===b}};var db=new z;a.Observer=p,a.Observer.hasObjectObserve=F,a.ArrayObserver=s,a.ArrayObserver.calculateSplices=function(a,b){return db.calculateSplices(a,b)},a.ArraySplice=z,a.ObjectObserver=r,a.PathObserver=u,a.CompoundPathObserver=v,a.Path=i}("undefined"!=typeof global&&global?global:this);var Path={version:"0.8.4",map:function(a){return Path.routes.defined.hasOwnProperty(a)?Path.routes.defined[a]:new Path.core.route(a)},root:function(a){Path.routes.root=a},rescue:function(a){Path.routes.rescue=a},history:{initial:{},pushState:function(a,b,c){Path.history.supported?(history.pushState(a,b,c),Path.dispatch(c)):Path.history.fallback&&(window.location.hash="#"+c)},popState:function(){var a=!Path.history.initial.popped&&location.href==Path.history.initial.URL;Path.history.initial.popped=!0,a||Path.dispatch(document.location.pathname)},listen:function(a){if(Path.history.supported=!(!window.history||!window.history.pushState),Path.history.fallback=a,Path.history.supported)Path.history.initial.popped="state"in window.history,Path.history.initial.URL=location.href,window.onpopstate=Path.history.popState;else if(Path.history.fallback){for(route in Path.routes.defined)"#"!=route.charAt(0)&&(Path.routes.defined["#"+route]=Path.routes.defined[route],Path.routes.defined["#"+route].path="#"+route);Path.listen()}}},match:function(a,b){var c,d,e,f,g,h={},i=null;for(i in Path.routes.defined)if(null!==i&&void 0!==i)for(i=Path.routes.defined[i],c=i.partition(),f=0;f<c.length;f++){if(d=c[f],g=a,d.search(/:/)>0)for(e=0;e<d.split("/").length;e++)e<g.split("/").length&&":"===d.split("/")[e].charAt(0)&&(h[d.split("/")[e].replace(/:/,"")]=g.split("/")[e],g=g.replace(g.split("/")[e],d.split("/")[e]));if(d===g)return b&&(i.params=h),i}return null},dispatch:function(a){var b,c;if(Path.routes.current!==a){if(Path.routes.previous=Path.routes.current,Path.routes.current=a,c=Path.match(a,!0),Path.routes.previous&&(b=Path.match(Path.routes.previous),null!==b&&null!==b.do_exit&&b.do_exit()),null!==c)return c.run(),Path.onchange&&Path.onchange(b,c),!0;null!==Path.routes.rescue&&Path.routes.rescue(),Path.onchange&&Path.onchange(b,c)}},listen:function(){var a=function(){Path.dispatch(location.hash)};""===location.hash&&null!==Path.routes.root&&(location.hash=Path.routes.root),"onhashchange"in window&&(!document.documentMode||document.documentMode>=8)?window.onhashchange=a:setInterval(a,50),""!==location.hash&&Path.dispatch(location.hash)},core:{route:function(a){this.path=a,this.action=null,this.do_enter=[],this.do_exit=null,this.params={},Path.routes.defined[a]=this}},routes:{current:null,root:null,rescue:null,previous:null,defined:{}}};Path.core.route.prototype={to:function(a){return this.action=a,this},enter:function(a){return a instanceof Array?this.do_enter=this.do_enter.concat(a):this.do_enter.push(a),this},exit:function(a){return this.do_exit=a,this},partition:function(){for(var a,b,c=[],d=[],e=/\(([^}]+?)\)/g;a=e.exec(this.path);)c.push(a[1]);for(d.push(this.path.split("(")[0]),b=0;b<c.length;b++)d.push(d[d.length-1]+c[b]);return d},run:function(){var a,b,c=!1;if(Path.routes.defined[this.path].hasOwnProperty("do_enter")&&Path.routes.defined[this.path].do_enter.length>0)for(a=0;a<Path.routes.defined[this.path].do_enter.length;a++)if(b=Path.routes.defined[this.path].do_enter[a].apply(this,null),b===!1){c=!0;break}c||Path.routes.defined[this.path].action()}},function(a){var b,c,d,e,f,g,h,i,j,k,l;return window.syncView=Platform.performMicrotaskCheckpoint,c=a.fn.bindTo=function(b,d){var e,f,g,h,i,j,k;for(h=this,k=/[^|]\|[^|]/g,i=function(a,c){var e,f,g,h,i,j,m,n;for(f=Array.prototype.slice.call(a.get(0).attributes),m=0,n=f.length;n>m;m++)if(e=f[m],"data"===e.name.split("-").shift()&&(g=c[e.name.replace("data-","")])){for(h=e.value,a.removeAttr(e.name),i=[],j=0;k.exec(h);)i.push(h.slice(j,k.lastIndex-2)),j=k.lastIndex-1;i.push(h.slice(j)),i.forEach(function(c){return g({element:a,expr:c,controller:b,model:d,args:l})})}},g="[data-"+Object.keys(c.blockHandlers).join("],[data-")+"]";(f=h.find(g)).length;)i(f.first(),c.blockHandlers);return j="[data-"+Object.keys(c.handlers).join("],[data-")+"]",e=h.filter(j).add(h.find(j)),e.each(function(){return i(a(this),c.handlers)}),h},c.blockHandlers={repeat:function(c){var e,f,g,h;return f=c.element.attr("data-controller"),c.element.removeAttr("data-controller"),h=c.element,c.element=a('<script type="text/repeat-placeholder"><!--data-repeat="'+c.expr+'"--></script>').replaceAll(h),e=null,g=a(),b(c,function(b){return g.remove(),g=a(),e&&(e.close(),e=null),Array.isArray(b)?(b.forEach(function(a){var b,d;return d=h.clone(),b=f?chip.getController(f,{parent:c.controller,element:d,model:a}):c.controller,g.push(d.bindTo(b,a).get(0)),f?"function"==typeof b.setup?b.setup():void 0:void 0}),c.element.after(g),e=d(c.element,b,function(d){return d.forEach(function(d){var e,f,i,j,k;for(f=[d.index,d.removed.length],j=[],e=d.index;e<d.index+d.addedCount;)i=b[e],j.push(h.clone().bindTo(c.controller,i).get(0)),e++;return k=g.splice.apply(g,f.concat(j)),a(k).remove(),0===d.index?c.element.after(j):g.eq(d.index-1).after(j)})})):void 0})},partial:function(a){return b(a,function(b){return a.element.html(b)})}},c.handlers={"if":function(a){return b(a,function(b){return b?a.element.show():a.element.hide()})},bind:function(a){return b(a,function(b){return a.element.text(null!=b?b:"")})},"bind-html":function(a){return b(a,function(b){return a.element.html(null!=b?b:"")})},attr:function(a){var c;return c=a.args()[0],b(a,function(b){return a.element.attr(c,b)})},active:function(c){var d,e;return c.expr?b(c,function(a){return a?c.element.addClass("active"):c.element.removeClass("active")}):(e=function(){return d.length&&d.get(0).href===location.href?c.element.addClass("active"):c.element.removeClass("active")},d=c.element.filter('[href],[data-attr^="href:"]').add(c.element.children('[href],[data-attr^="href:"]')).first(),d.on("boundUpdate",e),a(document).on("urlchange",e),k(c.element,function(){return a(document).off("urlchange",e)}),e())},"class":function(a){var c;return c=a.args()[0],b(a,function(b){return b?a.element.addClass(c):a.element.removeClass(c)})},value:function(a){return b(a,function(b){return a.element.val(b)})},on:function(a){var b;return b=a.args()[0],a.element.on(b,function(b){return b.preventDefault(),f(a)})}},g=["click","dblclick","submit","change","focus","blur"],j={enter:13,esc:27},g.forEach(function(a){return c.handlers["on"+a]=function(b){return b.element.on(a,function(a){return a.preventDefault(),f(b)})}}),Object.keys(j).forEach(function(a){var b;return b=j[a],c.handlers["on"+a]=function(a){return a.element.on("keydown",function(c){return c.keyCode===b?(c.preventDefault(),f(a)):void 0})}}),Path.onchange=function(){return a(document).trigger("urlchange")},l=function(){var a;return a=this.expr.split(/\s*:\s*/),this.expr=a.pop(),a},i=function(a){var b,c;return c=[],(b=a.match(/[\w\$][\w\$\d-\.]*\(?/g))?(Array.prototype.forEach.call(b,function(a){return"("===a.slice(-1)&&(a=a.split(".").slice(0,-1).join(".")),a&&"this"!==a&&"controller"!==a&&"model"!==a&&"element"!==a?c.push(a):void 0}),c):c},k=function(a,b){return a.on("removeObserver",b)},a.event.special.removeObserver={remove:function(a){return a.handler()}},b=function(a,b){var c,d;return d=function(){return a.element.trigger("boundUpdate"),b(f(a))},c=[],c.close=function(){return this.forEach(function(a){return a.close()})},i(a.expr).forEach(function(b){var e,f;return e=b.split("."),f=e.shift(),b=e.join("."),"controller"===f&&a.controller?c.push(new PathObserver(a.controller,b,d)):"model"===f&&a.model?c.push(new PathObserver(a.model,b,d)):"element"===f&&a.element?c.push(new PathObserver(a.element,b,d)):void 0}),k(a.element,function(){return c.close()}),d(),c},d=function(a,b,c){var d;return d=new ArrayObserver(b,c),k(a,function(){return d.close()}),d},h={},e=function(a){return a=-1===a.indexOf("(")?"try{return "+a+"}catch(e){}":"return "+a},f=function(a){var b,c,d;if(c=h[a.expr],!c)try{d=e(a.expr),c=h[a.expr]=Function("controller","model","element",d)}catch(f){throw b=f,'Error evaluating code for binding: "'+a.expr+'" with error: '+b.message}return c.call(a.model||a.controller,a.controller,a.model,a.element)}}(jQuery);var __hasProp={}.hasOwnProperty;!function(a){var b;return b={templates:{},controllers:{},getTemplate:function(a){return $(b.templates[a])},getController:function(a,c){if(!b.controllers.hasOwnProperty(a))throw'Controller "'+a+'" does not exist';return new b.controllers[a](c)},controller:function(a,c){var d,e,f;null==c&&(c={}),d=function(){function b(b){null==b&&(b={}),this.name=a,this.parent=b.parent,this.model=b.model,this.element=b.element}return b}();for(e in c)__hasProp.call(c,e)&&(f=c[e],d.prototype[e]=f);return b.controllers[a]=d},runRoute:function(a,c){var d,e,f,g,h,i,j;for(g=["[data-route]"],i=0,j=c.length;j>i;i++)f=c[i],g.push("[data-route]");return g=g.join(" "),d=$(g),e=d.data("controller"),null!=e&&"function"==typeof e.teardown&&e.teardown(),e=b.getController(a),h=b.getTemplate(a),d.data("controller",e).html(h).bindTo(e),null!=e&&"function"==typeof e.setup&&e.setup(),syncView()},route:function(a,c,d){var e;return"function"==typeof c&&(d=c),"string"!=typeof c&&(c=a.replace(/^\//,"").replace(/\/\w/,function(a){return a.slice(1).toUpperCase()})),b.route.parents||(b.route.parents=[]),e=b.route.parents.slice(),e.length&&(a=e.join("")+a),Path.map(a).to(function(){return b.runRoute(c,e)}),d?(b.route.parents.push(a),d(b.route),b.route.parents.pop()):void 0},listen:function(){return Path.history.listen(),Path.history.supported?$("body").on("click","a[href]",function(a){return a.preventDefault(),Path.history.pushState({},"",$(this).attr("href"))}):void 0}},"function"==typeof define&&define.amd?define("chip",b):"object"==typeof exports&&"object"==typeof module?(a.chip=b,module.exports=b):a.chip=b}(this);